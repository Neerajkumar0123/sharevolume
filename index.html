<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Loading Entity Data...</title><script src="https://cdn.tailwindcss.com"></script><style>body { display: flex; justify-content: center; align-items: center; min-height: 100vh; background-color: #f3f4f6; font-family: sans-serif; } .container { background-color: white; padding: 2rem; border-radius: 0.5rem; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); text-align: center; max-width: 600px; width: 100%; } .highlight { font-weight: bold; color: #4f46e5; }.error-message { color: #ef4444; margin-top: 1rem; }</style></head><body><div class="container"><h1 class="text-3xl font-bold mb-6 text-gray-800" id="share-entity-name-h1">Loading Entity Data...</h1><p class="text-lg mb-4 text-gray-700">Entity Name: <span class="highlight" id="share-entity-name">Loading...</span></p><div class="mb-6"><h2 class="text-2xl font-semibold mb-3 text-gray-800">Shares Outstanding</h2><div class="flex flex-col md:flex-row justify-around space-y-4 md:space-y-0 md:space-x-4"><div class="bg-blue-50 p-4 rounded-md shadow-sm flex-1"><h3 class="text-xl font-medium text-gray-700 mb-2">Maximum Value</h3><p class="text-gray-600">Value: <span class="highlight text-2xl" id="share-max-value">Loading...</span></p><p class="text-gray-600">Fiscal Year: <span class="highlight" id="share-max-fy">Loading...</span></p></div><div class="bg-green-50 p-4 rounded-md shadow-sm flex-1"><h3 class="text-xl font-medium text-gray-700 mb-2">Minimum Value</h3><p class="text-gray-600">Value: <span class="highlight text-2xl" id="share-min-value">Loading...</span></p><p class="text-gray-600">Fiscal Year: <span class="highlight" id="share-min-fy">Loading...</span></p></div></div></div><p class="text-sm text-gray-500 mt-4">Data sourced from SEC EDGAR API.</p><div class="mt-6"><p class="text-lg text-gray-700">Attachment reference:</p><img src="uid.txt" alt="Attachment uid.txt" class="mx-auto mt-2 max-w-full h-auto border border-gray-300 rounded-md p-2" style="max-height: 100px; object-fit: contain;"></div><div id="error-message" class="error-message hidden"></div></div><script>async function fetchData(cik) { const userAgent = 'AutoZoneApp/1.0 (noreply@example.com)'; const secApiUrl = `https://data.sec.gov/api/xbrl/companyconcept/CIK${cik}/dei/EntityCommonStockSharesOutstanding.json`; // Using AllOrigins proxy to bypass CORS issues for direct browser fetch const proxyUrl = `https://api.allorigins.win/raw?url=${encodeURIComponent(secApiUrl)}`; try { const response = await fetch(proxyUrl, { headers: { 'User-Agent': userAgent } }); if (!response.ok) { throw new Error(`HTTP error! status: ${response.status}`); } const data = await response.json(); const entityName = data.entityName; const shares = data.units.shares.filter(s => parseInt(s.fy) > 2020 && typeof s.val === 'number'); if (shares.length === 0) { throw new Error('No valid share data found for fiscal years after 2020.'); } let maxVal = -Infinity; let minVal = Infinity; let maxFy = ''; let minFy = ''; shares.forEach(s => { if (s.val > maxVal) { maxVal = s.val; maxFy = s.fy; } if (s.val < minVal) { minVal = s.val; minFy = s.fy; } }); return { entityName, max: { val: maxVal, fy: maxFy }, min: { val: minVal, fy: minFy } }; } catch (error) { console.error('Failed to fetch or process data:', error); document.getElementById('error-message').textContent = `Error: ${error.message}. Please try again later or with a valid CIK.`; document.getElementById('error-message').classList.remove('hidden'); return null; } } function updateUI(data) { if (!data) { document.title = 'Error Loading Data'; document.getElementById('share-entity-name-h1').textContent = 'Error Loading Data'; document.getElementById('share-entity-name').textContent = 'N/A'; document.getElementById('share-max-value').textContent = 'N/A'; document.getElementById('share-max-fy').textContent = 'N/A'; document.getElementById('share-min-value').textContent = 'N/A'; document.getElementById('share-min-fy').textContent = 'N/A'; return; } const formatNumber = (num) => num.toLocaleString('en-US'); document.title = `${data.entityName} Shares Outstanding`; document.getElementById('share-entity-name-h1').textContent = `${data.entityName} Shares Outstanding`; document.getElementById('share-entity-name').textContent = data.entityName; document.getElementById('share-max-value').textContent = formatNumber(data.max.val); document.getElementById('share-max-fy').textContent = data.max.fy; document.getElementById('share-min-value').textContent = formatNumber(data.min.val); document.getElementById('share-min-fy').textContent = data.min.fy; } document.addEventListener('DOMContentLoaded', async () => { const urlParams = new URLSearchParams(window.location.search); const cik = urlParams.get('CIK') || '0000866787'; // Default to AutoZone const data = await fetchData(cik); updateUI(data); });</script></body></html>